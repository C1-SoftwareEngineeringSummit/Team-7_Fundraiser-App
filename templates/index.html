{% extends "layout.html" %}
{% block content %}
		<div class="split left">
            
 			 <div class="Hcentered">
                  
    			<ul id="events">
    				

    				<!-- <li class = "single_event"> 
    				<img src="https://www.fnasafety.com/wp-content/uploads/2018/10/chipotle-mexican-grill-logo-png-transparent.png">
<<<<<<< HEAD

    				Chipotle Fundraiser 
    				<p class ="description"> A description of the event</p>

    				<p class ="time"> Time of the event</p>



                    </li> -->
                    
                    {% for fundraiser in fundraisers %}
                    
					<li id='event-holder'>
						<a href="#"> <h1 id='home-page-buiness-name'>{{ fundraiser.business.title }}</h1> </a>
						<h2 id='home-page-hosted-by'>Hosted by: {{ fundraiser.organization.title }}</h2>
						<h3 id='home-page-address'>{{ fundraiser.business.address }}</h3>
						<p id=home-page-description>Deal: {{ fundraiser.description }}</p>
					</li>
          
					<br>
                    {% endfor %}
    		</ul>
        
  			</div>
		</div>

		<div class="split right">
  			<div class="centered">
    		<h2 style="font-size: 50px; padding-top: 140px">Look for fundraisers below!</h2>

            <div id="map" style="width: 500px; height: 400px; padding: 80px"></div>
            </div>

            
      <div id="map" style="width: 500px; height: 400px; padding: 80px"> </div>
            </div>

        
    <script>
      // Note: This example requires that you consent to location sharing when
      // prompted by your browser. If you see the error "The Geolocation service
      // failed.", it means you probably did not give permission for the browser to
      // locate you.
      var map, infoWindow;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 17
        });

        
        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
           
            

            
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            var lat = position.coords.latitude;
            var lng = position.coords.longitude;

            infoWindow.setPosition(pos);
            infoWindow.setContent('Location found.');
            infoWindow.open(map);
            map.setCenter(pos);
            var marker1 = new google.maps.Marker({
              position: pos,
              map: map,
              title: 'Current Location'
          });
            var pos2 = {
              lat: 38.8808432,
              lng: -77.1161042
            }
            var marker2 = new google.maps.Marker({
              position: pos2,
              map: map,
              title: 'Chipotle'
          });

            var pos3 = {
              lat: 38.8808433,
              lng: -77.1161041
            }
            var marker3 = new google.maps.Marker({
              position: pos3,
              map: map,
              title: 'Cava'
          });


            
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6RPSgBUThIlPQK7Jnr3KqRUN1hCpIOuI&callback=initMap">
    </script>



  			</div>
		</div>



<!-- <script src="../static/index.js"></script> -->

{% endblock content %}
